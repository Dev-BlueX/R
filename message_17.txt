--NOTE:
-- THIS SCRIPT IS MEANT TO BE READ IN ORDER TO TEACH HOW TO USE THE LIBRBARY.
-- THIS MEANS SOME TOGGLES MAY CHANGE THE VALUES OF OTHER ELEMENTS ON THE UI
-- THESE AREN'T BUGS, THEY'RE JUST SHOWING YOU HOW TO DO THINGS

local UI = loadstring(game:HttpGet("https://raw.githubusercontent.com/cueshut/saves/main/compact"))()
UI = UI.init("Blue X", "v1.0.0", "SHOWCASE")

local S, AimTwo = UI:AddTab("Setting Farm", "Cài Đặt Cày") do
local Section = S:AddSeperator("Setting Farm") do

local list = {"Melee", "Sword", "Fruit", "Gun"}

local dropdown = S:AddDropdown({
    title = "Select Weapon",
    options = list,
    callback = function(selected, value)
        _G.SelectWeapon = value
    end
})

task.spawn(function()
    while wait() do
        pcall(function()
            if _G.SelectWeapon == "Melee" then
                for i, v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
                    if v.ToolTip == "Melee" then
                        if game.Players.LocalPlayer.Backpack:FindFirstChild(tostring(v.Name)) then
                            _G.SelectWeapon = v.Name
                        end
                    end
                end
            elseif _G.SelectWeapon == "Sword" then
                for i, v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
                    if v.ToolTip == "Sword" then
                        if game.Players.LocalPlayer.Backpack:FindFirstChild(tostring(v.Name)) then
                            _G.SelectWeapon = v.Name
                        end
                    end
                end
            elseif _G.SelectWeapon == "Gun" then
                for i, v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
                    if v.ToolTip == "Gun" then
                        if game.Players.LocalPlayer.Backpack:FindFirstChild(tostring(v.Name)) then
                            _G.SelectWeapon = v.Name
                        end
                    end
                end
            elseif _G.SelectWeapon == "Fruit" then
                for i, v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
                    if v.ToolTip == "Blox Fruit" then
                        if game.Players.LocalPlayer.Backpack:FindFirstChild(tostring(v.Name)) then
                            _G.SelectWeapon = v.Name
                        end
                    end
                end
            end
        end)
    end
end)

local masterToggle = S:AddToggle({
title = "Fast Attack",
desc = "Đánh Nhanh",
callback = function(value)
_G.FastAttack = value
end
})

local player = game.Players.LocalPlayer

function FindEnemiesInRange(targets, enemies)
    local playerPos = (player.Character or player.CharacterAdded:Wait()):GetPivot().Position
    local primaryTarget = nil

    for _, enemy in ipairs(enemies) do
        if not enemy:GetAttribute("IsBoat") and enemy:FindFirstChildOfClass("Humanoid") and enemy.Humanoid.Health > 0 then
            local head = enemy:FindFirstChild("Head")
            if head and (playerPos - head.Position).Magnitude <= 60 then
                if enemy ~= player.Character then
                    table.insert(targets, { enemy, head })
                    primaryTarget = head
                end
            end
        end
    end

    return primaryTarget
end

function GetEquippedTool()
    local character = player.Character
    if not character then return nil end
    for _, item in ipairs(character:GetChildren()) do
        if item:IsA("Tool") then
            return item
        end
    end
    return nil
end

function AttackNoCoolDown()
    local targets = {}
    local enemies = game:GetService("Workspace").Enemies:GetChildren()
    local primaryPart = FindEnemiesInRange(targets, enemies)

    if not primaryPart then return end

    local tool = GetEquippedTool()
    if not tool then return end

    pcall(function()
        local storage = game:GetService("ReplicatedStorage")
        local attackEvent = storage:WaitForChild("Modules"):WaitForChild("Net"):WaitForChild("RE/RegisterAttack")
        local hitEvent = storage:WaitForChild("Modules"):WaitForChild("Net"):WaitForChild("RE/RegisterHit")

        if #targets > 0 then
            attackEvent:FireServer(0.000000001)
            hitEvent:FireServer(primaryPart, targets)
        else
            task.wait(0.000000001)
        end
    end)
end

_G.FastAttack = true

spawn(function()
    if _G.FastAttack then
        repeat
            task.wait()
            AttackNoCoolDown()
        until not _G.FastAttack
    end
end)

local bm = {"Low", "Normal", "Super Bring"}
local dropdown = S:AddDropdown({
title = "Select Bring Mob",
options = bm,
callback = function(selected, value) 
_G.BringMode = value
end
})

spawn(function()
    while wait(.1) do
        if _G.BringMode then
            pcall(function()
                if _G.BringMode == "Low" then
                    _G.BringMode = 250
                elseif _G.BringMode == "Normal" then
                    _G.BringMode = 300
                elseif _G.BringMode == "Super Bring" then
                    _G.BringMode = 350
                end
            end)
        end
    end
end)

local masterToggle = S:AddToggle({
title = "Bring Mob",
desc = "Gom Quái",
callback = function(Mag)
_G.BringMonster = Mag
end
})

spawn(function()
        while task.wait() do
            pcall(function()
                if _G.BringMonster then
                    CheckQuest()
                    for i,v in pairs(game:GetService("Workspace").Enemies:GetChildren()) do
                        if _G.AutoFarm and StartMagnet and v.Name == Mon and (Mon == "Factory Staff [Lv. 800]" or Mon == "Monkey [Lv. 14]" or Mon == "Dragon Crew Warrior [Lv. 1575]" or Mon == "Dragon Crew Archer [Lv. 1600]") and v:FindFirstChild("Humanoid") and v:FindFirstChild("HumanoidRootPart") and v.Humanoid.Health > 0 and (v.HumanoidRootPart.Position - game:GetService("Players").LocalPlayer.Character.HumanoidRootPart.Position).Magnitude <= 220 then
                            v.HumanoidRootPart.Size = Vector3.new(50,50,50)
                            v.HumanoidRootPart.CFrame = PosMon
                            v.Humanoid:ChangeState(14)
                            v.HumanoidRootPart.CanCollide = false
                            v.Head.CanCollide = false
                            if v.Humanoid:FindFirstChild("Animator") then
                                v.Humanoid.Animator:Destroy()
                            end
                            sethiddenproperty(game:GetService("Players").LocalPlayer,"SimulationRadius",math.huge)
                        elseif _G.AutoFarm and StartMagnet and v.Name == Mon and v:FindFirstChild("Humanoid") and v:FindFirstChild("HumanoidRootPart") and v.Humanoid.Health > 0 and (v.HumanoidRootPart.Position - game:GetService("Players").LocalPlayer.Character.HumanoidRootPart.Position).Magnitude <= _G.BringMode then
                            v.HumanoidRootPart.Size = Vector3.new(50,50,50)
                            v.HumanoidRootPart.CFrame = PosMon
                            v.Humanoid:ChangeState(14)
                            v.HumanoidRootPart.CanCollide = false
                            v.Head.CanCollide = false
                            if v.Humanoid:FindFirstChild("Animator") then
                                v.Humanoid.Animator:Destroy()
                            end
                            sethiddenproperty(game:GetService("Players").LocalPlayer,"SimulationRadius",math.huge)
                        end
                    end
                end
            end)
        end
    end)
    
local masterToggle = S:AddToggle({
title = "Bypass",
desc = "Dịch Chuyển Nhanh",
callback = function(Fast)
BypassTP = Fast
end
})

local masterToggle = S:AddToggle({
title = "Auto Haki Buso",
desc = "Bật Haki Vũ Trang",
callback = function(value)
_G.AUTOHAKI = value
end
})

spawn(function()
    while wait(.1) do
        if _G.AUTOHAKI then 
            if not game.Players.LocalPlayer.Character:FindFirstChild("HasBuso") then
                local args = {
                    [1] = "Buso"
                }
                game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
            end
        end
    end
end)

local TabTwo = UI:AddTab("Second tab", "some other things")